<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b1220" />
  <title>{{ exhibit.name }}</title>
  <link rel="stylesheet" href="{{ static_prefix|default('/static/') }}style.css?v=11" />
  <link rel="manifest" href="{{ static_prefix|default('/static/') }}manifest.webmanifest?v=4" />
</head>
<body>
  <header class="header">
    <div class="container header__row">
      <a class="link" href="{{ home_href|default('/') }}">← Назад</a>
      <div class="brand__title">Карточка экспоната</div>
    </div>
  </header>

  <main class="container">
    <section class="detail">
      <div class="detail__top">
        <div>
          <div class="detail__id">ID {{ exhibit.exhibit_id }}</div>
          <h1 class="detail__title">{{ exhibit.name }}</h1>
          <div class="detail__museum">{{ exhibit.museum }}</div>
        </div>
      </div>

      {% if photo_url %}
        <img class="photo" src="{{ photo_url }}" alt="{{ exhibit.name }}" />
      {% endif %}

      <div class="detail__grid">
        <div class="field">
          <div class="field__label">Категория</div>
          <div class="field__value">{{ exhibit.category }}</div>
        </div>
        <div class="field">
          <div class="field__label">Эпоха/Период</div>
          <div class="field__value">{{ exhibit.period }}</div>
        </div>
        <div class="field">
          <div class="field__label">Дата поступления</div>
          <div class="field__value">{% if exhibit.received_date %}{{ exhibit.received_date }}{% else %}-{% endif %}</div>
        </div>
        <div class="field">
          <div class="field__label">Связь с Воронежем</div>
          <div class="field__value">{{ exhibit.voronezh_story }}</div>
        </div>
      </div>

      <div class="field">
        <div class="field__label">Описание</div>
        <div class="field__value field__value--text">{{ exhibit.description }}</div>
      </div>
    </section>
  </main>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.getRegistrations().then((regs) => {
        regs.forEach((reg) => reg.unregister());
      });
      caches.keys().then((keys) => {
        keys.forEach((k) => {
          if (k.startsWith('museum-exhibits')) {
            caches.delete(k);
          }
        });
      });
    }
  </script>
</body>
</html>
